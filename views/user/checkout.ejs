<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>checkout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>
    <header>
        <!-- Jumbotron -->
        <div class="p-3 text-center bg-white border-bottom">
          <div class="container">
            <div class="d-flex justify-content-between">
              <!-- Left elements -->
              <div class="">
                <a href="https://mdbootstrap.com/" target="_blank" class="">
                  <img src="https://mdbootstrap.com/img/logo/mdb-transaprent-noshadows.png" height="35" />
                </a>
              </div>
              <!-- Left elements -->
      
              <!-- right elements -->
              <div class="">
                <a href="https://github.com/mdbootstrap/bootstrap-material-design" class="me-1 border rounded py-1 px-3 nav-link" target="_blank"> <i class="fas fa-user-alt me-2"></i>Sign in </a>
              </div>
              <!-- right elements -->
            </div>
          </div>
        </div>
        <!-- Jumbotron -->
      
        <!-- Heading -->
        <div class="bg-primary">
          <div class="container py-4">
            <!-- Breadcrumb -->
            <nav class="d-flex">
              <h6 class="mb-0">
                <a href="" class="text-white-50">Home</a>
                <span class="text-white-50 mx-2"> > </span>
                <a href="" class="text-white-50">2. Shopping cart</a>
                <span class="text-white-50 mx-2"> > </span>
                <a href="" class="text-white"><u>3. Order info</u></a>
                <span class="text-white-50 mx-2"> > </span>
                <a href="" class="text-white-50">4. Payment</a>
              </h6>
            </nav>
            <!-- Breadcrumb -->
          </div>
        </div>
        <!-- Heading -->
      </header>
      
      <section class="bg-light py-5">
        <div class="container">
         
         <!-- Button trigger modal -->
<button style="margin-bottom: 15px;" type="button " class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Add New Address
</button>


                  <h5 class="card-title mb-3">Shipping info</h5>
                
                   
                 
                  <div class="row mb-3">
                    <div class="col-lg-8 mb-3">
                      <div class="card-body">
                        <% userData.forEach((userData, index) => { %>
                          <div class="form-outline mb-4">
                            <b>Full Address:</b> <i><%= userData.fulladdress %></i><br>
                            <i>Street:<%= userData.street %></i><br>
                            <i>City:<%= userData.city %></i><br>
                            <i>State:<%= userData.state %></i><br>
                            <i>Mobile:<%= userData.mobile %></i><br>
                            <i>Pincode:<%= userData.pincode %></i>
                        
                            <div class="form-check">
                              <input class="form-check-input" type="radio" name="selectedAddress" id="<%= 'address' + index %>" value="<%= JSON.stringify(userData) %>">
                              <label class="form-check-label" for="<%= 'address' + index %>">
                                Select
                              </label>
                            </div>
                          </div>
                        <% }) %>
                        
      



<!-- Modal -->
<div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        


        <div class="card-body">
          <form  action="/user/checkout/addaddress"  method="post"  >
            <!-- 2 column grid layout with text inputs for the first and last names -->
            <div class="row mb-4">
              <div class="col">
                <div class="form-outline">
                  <input type="text" id="form7Example1" name="name" class="form-control" />
                  <label class="form-label" for="form7Example1">name</label>
                </div>
              </div>
            
            </div>
            <div class="form-outline mb-4">
                <input type="text" id="form7Example4" name="email" class="form-control" />
                <label class="form-label" for="form7Example4">email</label>
              </div>
  
            <!-- Text input -->
            <div class="form-outline mb-4">
              <input type="text" id="form7Example3" name="fulladdress" class="form-control" />
              <label class="form-label" for="form7Example3">Full Address</label>
            </div>
            <div class="form-outline mb-4">
                <input type="text" id="form7Example5" name="street" class="form-control" />
                <label class="form-label" for="form7Example5">Street</label>
              </div>
              <div class="form-outline mb-4">
                <input type="text" id="form7Example5" name="city" class="form-control" />
                <label class="form-label" for="form7Example5">City</label>
              </div>
              <div class="form-outline mb-4">
                <input type="text" id="form7Example5" name="state" class="form-control" />
                <label class="form-label" for="form7Example5">State</label>
              </div>
  
            <!-- Text input -->
          
  
            <!-- Email input -->
            <div class="form-outline mb-4">
              <input type="text" id="form7Example5" name="mobile" class="form-control" />
              <label class="form-label" for="form7Example5">Mobile</label>
            </div>

            <div class="form-outline mb-4">
                <input type="number" id="form7Example6" name="pincode"  class="form-control" />
                <label class="form-label" for="form7Example6">Pin code</label>
              </div>
  
         
              <div class="modal-footer">
                <button type="button "  class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button  type="submit" class="btn btn-primary">Save changes</button>
              </div>
  
            </form> 
              </div>



      </div>
   
    </div>
  </div>
</div>



                          
                          <!-- <div class="form-outline mb-4">
                              <input type="text" value=""  id="form7Example5" name="street"
                                  class="form-control" />
                              <label class="form-label" for="form7Example5">Street</label>
                          </div>
                          <div class="form-outline mb-4">
                              <input type="text" value=""  id="form7Example5" name="city"
                                  class="form-control" />
                              <label class="form-label" for="form7Example5">City</label>
                          </div>
                          <div class="form-outline mb-4">
                              <input type="text" value=""  id="form7Example5" name="state"
                                  class="form-control" />
                              <label class="form-label" for="form7Example5">State</label>
                          </div>

                          Text input -->


                          <!-- Email input -->
                          <!-- <div class="form-outline mb-4"> -->
                              <!-- <input type="text" value="" id="form7Example5" name="mobile"
                                  class="form-control" />
                              <label class="form-label" for="form7Example5">Mobile</label>
                          </div>

                          <div class="form-outline mb-4">
                              <input type="text" id="form7Example6" value=""  name="name" class="form-control" />
                              <label class="form-label" for="form7Example6">Pin code</label>
                            </div> --> 
                            


                        


                      </form>

                            
  
            
                  </div>
              
             
              <!-- Checkout -->
            </div>
            <div class="col-xl-4 col-lg-4 d-flex justify-content-center justify-content-lg-end">
              <div class="ms-lg-4 mt-4 mt-lg-0" style="max-width: 320px;">
                <h6 class="mb-3">Summary</h6>
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Total price:</p>
                  <p class="mb-2">₹ <%= totalPrice %></p>
                </div>
                <!-- <div class="d-flex justify-content-between">
                  <p class="mb-2">Discount:</p>
                  <p class="mb-2 text-danger">- $60.00</p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Shipping cost:</p>
                  <p class="mb-2">+ $14.00</p>
                </div>
                <hr /> -->
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Total price:</p>
                  <p class="mb-2 fw-bold">₹ <%= totalPrice %></p>
                </div>
      
                <div class="input-group mt-3 mb-4">
                  <input type="text" class="form-control border" name="" placeholder="Promo code" />
                  <button class="btn btn-light text-primary border">Apply</button>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="flexRadioDefault2" id="flexRadioDefault2">
                  <label class="form-check-label" for="flexRadioDefault2">
                    Cash on Delivery
                  </label>
                </div>

                <form id="addressForm" action="/user/confirmorder" method="post">
                  <input name="address" hidden id="selectedAddressnew" type="text" name="selectedAddress">
                  <button id="btn1" type="submit">Place Order</button>
              </form>
              
                <!-- <div class="mt-3">

                  <input hidden id="selectedAddressnew" type="text">
                  
                  <button id="btn1" type="submit" ><a href="/user/confirmorder">place order</button></a>
                  
                </div> -->
                <hr />
                <h6 class="text-dark my-4">Items in cart</h6>
                <% userData2.cart.items.forEach(element => { %>
               
      
                <div class="d-flex align-items-center mb-4">
                  <div class="me-3 position-relative">
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill badge-secondary">
                      1
                    </span>
                    <img src="/images/img/<%=element.image %>" style="height: 96px; width: 96x;" class="img-sm rounded border" />
                  </div>
                  <div class="">
                    <a href="#" class="nav-link">
                     <%= element.name  %>
                    </a>
                    <div class="price text-muted"><%= element.price %></div>
                  </div>
                </div>
        
                <% }) %>
                <!-- <div class="d-flex align-items-center mb-4">
                  <div class="me-3 position-relative">
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill badge-secondary">
                      1
                    </span>
                    <img src="https://bootstrap-ecommerce.com/bootstrap5-ecommerce/images/items/5.webp" style="height: 96px; width: 96x;" class="img-sm rounded border" />
                  </div>
                  <div class="">
                    <a href="#" class="nav-link">
                      Apple Watch Series 4 Space <br />
                      Large size
                    </a>
                    <div class="price text-muted">Total: $217.99</div>
                  </div>
                </div>
      
                <div class="d-flex align-items-center mb-4">
                  <div class="me-3 position-relative">
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill badge-secondary">
                      3
                    </span>
                    <img src="https://bootstrap-ecommerce.com/bootstrap5-ecommerce/images/items/1.webp" style="height: 96px; width: 96x;" class="img-sm rounded border" />
                  </div>
                  <div class="">
                    <a href="#" class="nav-link">GoPro HERO6 4K Action Camera - Black</a>
                    <div class="price text-muted">Total: $910.00</div>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Footer -->
      <footer class="text-center text-lg-start text-muted bg-primary mt-3">
        <!-- Section: Links  -->
        <section class="">
          <div class="container text-center text-md-start pt-4 pb-4">
            <!-- Grid row -->
            <div class="row mt-3">
              <!-- Grid column -->
              <div class="col-12 col-lg-3 col-sm-12 mb-2">
                <!-- Content -->
                <a href="https://mdbootstrap.com/" target="_blank" class="text-white h2">
                  MDB
                </a>
                <p class="mt-1 text-white">
                  © 2023 Copyright: MDBootstrap.com
                </p>
              </div>
              <!-- Grid column -->
      
              <!-- Grid column -->
              <div class="col-6 col-sm-4 col-lg-2">
                <!-- Links -->
                <h6 class="text-uppercase text-white fw-bold mb-2">
                  Store
                </h6>
                <ul class="list-unstyled mb-4">
                  <li><a class="text-white-50" href="#">About us</a></li>
                  <li><a class="text-white-50" href="#">Find store</a></li>
                  <li><a class="text-white-50" href="#">Categories</a></li>
                  <li><a class="text-white-50" href="#">Blogs</a></li>
                </ul>
              </div>
              <!-- Grid column -->
      
              <!-- Grid column -->
              <div class="col-6 col-sm-4 col-lg-2">
                <!-- Links -->
                <h6 class="text-uppercase text-white fw-bold mb-2">
                  Information
                </h6>
                <ul class="list-unstyled mb-4">
                  <li><a class="text-white-50" href="#">Help center</a></li>
                  <li><a class="text-white-50" href="#">Money refund</a></li>
                  <li><a class="text-white-50" href="#">Shipping info</a></li>
                  <li><a class="text-white-50" href="#">Refunds</a></li>
                </ul>
              </div>
              <!-- Grid column -->
      
              <!-- Grid column -->
              <div class="col-6 col-sm-4 col-lg-2">
                <!-- Links -->
                <h6 class="text-uppercase text-white fw-bold mb-2">
                  Support
                </h6>
                <ul class="list-unstyled mb-4">
                  <li><a class="text-white-50" href="#">Help center</a></li>
                  <li><a class="text-white-50" href="#">Documents</a></li>
                  <li><a class="text-white-50" href="#">Account restore</a></li>
                  <li><a class="text-white-50" href="#">My orders</a></li>
                </ul>
              </div>
              <!-- Grid column -->
      
              <!-- Grid column -->
              <div class="col-12 col-sm-12 col-lg-3">
                <!-- Links -->
                <h6 class="text-uppercase text-white fw-bold mb-2">Newsletter</h6>
                <p class="text-white">Stay in touch with latest updates about our products and offers</p>
                <div class="input-group mb-3">
                  <input type="email" class="form-control border" placeholder="Email" aria-label="Email" aria-describedby="button-addon2" />
                  <button class="btn btn-light border shadow-0" type="button" id="button-addon2" data-mdb-ripple-color="dark">
                    Join
                  </button>
                </div>
              </div>
              <!-- Grid column -->
            </div>
            <!-- Grid row -->
          </div>
        </section>
        <!-- Section: Links  -->
      
        <div class="">
          <div class="container">
            <div class="d-flex justify-content-between py-4 border-top">
              <!--- payment --->
              <div>
                <i class="fab fa-lg fa-cc-visa text-white"></i>
                <i class="fab fa-lg fa-cc-amex text-white"></i>
                <i class="fab fa-lg fa-cc-mastercard text-white"></i>
                <i class="fab fa-lg fa-cc-paypal text-white"></i>
              </div>
              <!--- payment --->
      
              <!--- language selector --->
              <div class="dropdown dropup">
                <a class="dropdown-toggle text-white" href="#" id="Dropdown" role="button" data-mdb-toggle="dropdown" aria-expanded="false"> <i class="flag-united-kingdom flag m-0 me-1"></i>English </a>
      
                <ul class="dropdown-menu dropdown-menu-endp" aria-labelledby="Dropdown">
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-united-kingdom flag"></i>English <i class="fa fa-check text-success ms-2"></i></a>
                  </li>
                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-poland flag"></i>Polski</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-china flag"></i>中文</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-japan flag"></i>日本語</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-germany flag"></i>Deutsch</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-france flag"></i>Français</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-spain flag"></i>Español</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-russia flag"></i>Русский</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="flag-portugal flag"></i>Português</a>
                  </li>
                </ul>
              </div>
              <!--- language selector --->
            </div>
          </div>
        </div>
      </footer>
      <!-- Footer -->

      
      
      <script>

document.getElementById("btn1").addEventListener("click", (e) => {
    e.preventDefault();
    const selectedAddressnew = document.getElementById('selectedAddressnew');
    const selectedAddressRadio = document.querySelector('input[name="selectedAddress"]:checked');
    const address = selectedAddressRadio.value;

    selectedAddressnew.value = address; // Set the value of the input element

    // Submit the form
    document.getElementById("addressForm").submit();
});




        // document.getElementById("btn1").addEventListener("click",(e) => {
        //   e.preventDefault()
        //   const selectedAddressnew = document.getElementById('selectedAddressnew')
        //   const COD = document.getElementById('flexRadioDefault2')
        //   const selectedAddressRadio = document.querySelector('input[name="selectedAddress"]:checked');
        //   const address = selectedAddressRadio.value
        //   console.log('now this',address);
          
        //   selectedAddressnew.innerHTML=address
          
          // const url = 'http://localhost:3000/user/confirmorder';
          // if (selectedAddressRadio && COD.checked) {
          //   fetch(url,{
          //     method:'post',
          //     headers: {
          //         'Content-Type': 'application/json'
          //     },
          //     body:JSON.stringify({address})
          //   })
            





            // const selectedAddress = JSON.parse(selectedAddressRadio.value);
            // console.log("Selected Address:", selectedAddress);
            // const url = `http://localhost:3000/user/confirmorder?selectedAddress=${selectedAddress}`;
            // window.location.href = url;            // You can now work with the selectedAddress object as needed.

            // const addressString = JSON.stringify(selectedAddress); // Serialize the object to a JSON string
            // const url = `http://localhost:3000/user/confirmorder/${selectedAddress}`;
          
        // })

      </script>
      
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>